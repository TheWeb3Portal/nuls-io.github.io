<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <title>NULS</title>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Canonical links -->
  <link rel="canonical" href="https://nuls-io.github.io/contract/SmartContractFee.html">
  <!-- Alternative links -->
  
    
      <link rel="alternative" hreflang="en" href="https://nuls-io.github.io/contract/SmartContractFee.html">
    
      <link rel="alternative" hreflang="zh-cn" href="https://nuls-io.github.io/zh-cn/contract/SmartContractFee.html">
    
  
  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="57x57" href="/icon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icon/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="/icon/favicon-196x196.png" sizes="196x196">
  <link rel="icon" type="image/png" href="/icon/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="/icon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/icon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/icon/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="/icon/mstile-144x144.png">
  <meta name="generator" content="Hexo 3.8.0">
  <!-- CSS -->
  <!-- build:css build/css/nuls.css -->
  <link rel="stylesheet" href="/css/nuls.css">
  <!-- endbuild -->
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css">
  <!-- RSS -->
  <link rel="alternate" href="/atom.xml" title="NULS">
</head>

<body>
  <div id="container">
    <header id="header" class="wrapper">
  <div id="header-inner" class="inner">
    <h1 id="logo-wrap">
      <a href="/" id="logo">Hexo</a>
    </h1>
    <nav id="main-nav">
      <a href="/docs/" class="main-nav-link">Documents</a><a href="/protocol/" class="main-nav-link">Protocol</a><a href="/contract/" class="main-nav-link">Smart Contract</a><a href="/chain/" class="main-nav-link">Cross-Chain</a><a href="/manual/" class="main-nav-link">Manual</a><a href="/news/" class="main-nav-link">News</a>
    </nav>
    <div id="lang-select-wrap">
      <label id="lang-select-label"><i class="fa fa-globe"></i><span>English</span></label>
      <select id="lang-select" data-canonical="contract/SmartContractFee.html">
        
          <option value="en" selected>English</option>
        
          <option value="zh-cn">简体中文</option>
        
      </select>
    </div>
    <a id="mobile-nav-toggle">
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
    </a>
  </div>
</header>

    <div id="content-wrap">
  <div id="content" class="wrapper">
    <div id="content-inner">
      <article class="article-container" itemscope="" itemtype="http://schema.org/Article">
        <div class="article-inner">
          <div class="article">
            <div class="inner">
              <header class="article-header">
                <h1 class="article-title" itemprop="name"></h1>
                <a href="https://github.com/nuls-io/devsite/edit/master/source/contract/SmartContractFee.md" class="article-edit-link" title="Improve this doc"><i class="fa fa-pencil"></i></a>
              </header>
              <div class="article-content" itemprop="articleBody">
                <h2 id="Service-charge-for-smart-contracts" class="article-heading"><a href="#Service-charge-for-smart-contracts" class="headerlink" title="Service charge for smart contracts"></a>Service charge for smart contracts<a class="article-anchor" href="#Service-charge-for-smart-contracts" aria-hidden="true"></a></h2><h3 id="1-Standards-of-service-charge-for-smart-contracts-How-is-the-service-fee-charged-How-much-does-it-cost-an-interface-invoker-Who-will-receive-the-service-charge" class="article-heading"><a href="#1-Standards-of-service-charge-for-smart-contracts-How-is-the-service-fee-charged-How-much-does-it-cost-an-interface-invoker-Who-will-receive-the-service-charge" class="headerlink" title="1. Standards of service charge for smart contracts: How is the service fee charged? How much does it cost an interface invoker? Who will receive the service charge?"></a>1. Standards of service charge for smart contracts: How is the service fee charged? How much does it cost an interface invoker? Who will receive the service charge?<a class="article-anchor" href="#1-Standards-of-service-charge-for-smart-contracts-How-is-the-service-fee-charged-How-much-does-it-cost-an-interface-invoker-Who-will-receive-the-service-charge" aria-hidden="true"></a></h3><blockquote>
<p><code>Background:</code> Since the NULS Main-Net uses the UTXO model, the transaction size is also used as one of the charging standards.</p>
</blockquote>
<p>In the main-net, there are now three more types of transactions: <code>creating a smart contract</code>, <code>invoking a smart contract</code>, <code>deleting a smart contract</code></p>
<p>The difference between those three transactions and other transactions such as <code>transfer</code> is that the execution of smart contracts will be added. So, execution of smart contracts will also be applied to the charging standards.</p>
<ul>
<li>Calculation of smart contract service charge </li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> COMPARISON = <span class="number">1</span> ; <span class="comment">//Compare bytecode </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> CONSTANT = <span class="number">1</span> ; <span class="comment">//Simple numeric type bytecode </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> LDC = <span class="number">1</span> ; <span class="comment">//Numeric constant, string constant (length * LDC) </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> CONTROL = . <span class="number">5</span> ; <span class="comment">//Control bytecode </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> TABLESWITCH = <span class="number">2</span> ; <span class="comment">//Switch bytecode (size * TABLESWITCH) </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> LOOKUPSWITCH = <span class="number">2</span> ; <span class="comment">//Switch bytecode (size * LOOKUPSWITCH) </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> CONVERSION = <span class="number">1</span> ; <span class="comment">//Value conversion </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> EXTENDED = <span class="number">1</span> ; <span class="comment">//Null determine </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MULTIANEWARRAY = <span class="number">1</span> ; <span class="comment">//Multidimensional Array (size * MULTIANEWARRAY) </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> LOAD = <span class="number">1</span> ; / /Send the local variable to the top of the stack </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> ARRAYLOAD = <span class="number">5</span> ; / /Send an item of the array to the top of the stack</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MATH = <span class="number">1</span> ; <span class="comment">//Mathematical operations and shift operations </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> REFERENCE = <span class="number">10</span> ; <span class="comment">//Object related operations </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> NEWARRAY = <span class="number">1</span> ; <span class="comment">//One-dimensional array (size * NEWARRAY) </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> STACK = <span class="number">2</span> ; <span class="comment">//Stack operation </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> STORE = <span class="number">1</span> ; <span class="comment">// Save the value in the top of the stack to a local variable </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> ARRAYSTORE = <span class="number">5</span>; <span class="comment">//Save the value of the stack to an array </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> TRANSFER = <span class="number">1000</span> ; <span class="comment">//Transfer transaction</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Total service charge for invoking a smart contract<br>The total service charge for a contract transaction consists of three parts</li>
</ul>
<ul>
<li><p>The first part is the transaction fee based on the transaction size, calculated according to the byte size -&gt; 0.001NULS/KB, which is 0.001 NULS per 1000 bytes. If the transaction size is less than 1000 bytes, the transaction fee is set as 0.001 NULS.</p>
</li>
<li><p>The second part is the ‘Gas*Price’ consumed by executing the contract. The ‘Price’ is the unit cost, which means how much ‘Na’ there is for each Gas. ‘Na’ is the smallest unit of NULS, and 1 NULS = 100 million Na.</p>
<blockquote>
<p>For example, if executing a contract consumes 20,000 Gas and the set Price is 20 Na/Gas, then the Na consumed this time would be 20,000 * 20 = 400,000 Na, which is 0.004 NULS.</p>
</blockquote>
</li>
<li><p>The third part refers to the remaining part of the GasLimit. GasLimit is set by the contract invoker. If it is not fully consumed by executing the current contract, the remaining Gas will be returned as the consensus reward.</p>
<blockquote>
<p>Still using the previous example, if the GasLimit set for the contract is 30,000 Gas and executing the contract consumes 20,000 Gas, then 10,000 Gas will be left. The 10,000 Gas has: 10,000 * 20 = 200,000 Na, which is 0.002 NULS. This will be returned to the contract invoker in the CoinBase transaction (consensus reward) of the current packing block.</p>
</blockquote>
</li>
</ul>
<ul>
<li>How much does a contract invoker pay?</li>
</ul>
<p>To start the contract transaction, the contract invoker pays the first, second and third part. In practical, the third part will be returned to the contract invoker in the CoinBase transaction (consensus reward) of the current packing block.</p>
<ul>
<li>Who receives the service charge?</li>
</ul>
<blockquote>
<p><code>Precondition:</code>This part of the cost is reflected in the CoinBase transaction (consensus reward) of the block.</p>
</blockquote>
<p>The block packer receives the first and second parts of the service charge, and the contract invoker receives the third part.</p>

              </div>
              <footer class="article-footer">
                <time class="article-footer-updated" datetime="2019-01-02T05:45:51.847Z" itemprop="dateModified">Last updated: 2019-01-02</time>
                <a href="smartContract.html" class="article-footer-prev" title="Smart Contract Manual"><i class="fa fa-chevron-left"></i><span>Prev</span></a>
              </footer>
            </div>
          </div>
          <aside id="article-toc" role="navigation">
            <div id="article-toc-inner">
              <strong class="sidebar-title">Contents</strong>
              <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Service-charge-for-smart-contracts"><span class="toc-text">Service charge for smart contracts</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Standards-of-service-charge-for-smart-contracts-How-is-the-service-fee-charged-How-much-does-it-cost-an-interface-invoker-Who-will-receive-the-service-charge"><span class="toc-text">1. Standards of service charge for smart contracts: How is the service fee charged? How much does it cost an interface invoker? Who will receive the service charge?</span></a></li></ol></li></ol>
              <a href="#" id="article-toc-top">Back to Top</a>
            </div>
          </aside>
        </div>
      </article>
      <aside id="sidebar" role="navigation">
  <div class="inner">
    <strong class="sidebar-title">Getting Started</strong><a href="index.html" class="sidebar-link">Development Manual</a><a href="NRC-20_Token_Standard.html" class="sidebar-link">NRC-20</a><a href="IdeaPlugin.html" class="sidebar-link">IDEA Plugin Manual</a><a href="CommunityVote.html" class="sidebar-link">Guide to Community Voting</a><a href="smartContract.html" class="sidebar-link">Smart Contract Manual</a><a href="SmartContractFee.html" class="sidebar-link current">Smart Contract Fee</a>
  </div>
</aside>
    </div>
  </div>
</div>

    <div class="footer-index" id="footer">
   <div class="footer-index-inner">
      <div class="footer-left">
         <div>© 2018 <a href="https://nuls.io" target="_blank">Nuls</a></div>
         <div>Documentation licensed under <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank">CC BY 4.0</a></div>
         <div>Power by <a href="https://hexo.io" target="_blank">HEXO</a></div>
      </div>
      <div class="footer-middle">
        <div>
          <a href="https://twitter.com/nulsservice" target="_blank"><i class="footer-icon1"></i></a>
        </div>
        <div>
         <a href="https://www.reddit.com/r/nulsservice/" target="_blank"><i class="footer-icon2"></i></a>
        </div>
        <div>
          <a href="https://t.me/Nulsio" target="_blank"><i class="footer-icon3"></i></a>
        </div>
        <div>
           <a href="https://steemit.com/@nuls" target="_blank"><i class="footer-icon4"></i></a>
        </div>
        <div>
          <a href="https://github.com/nuls-io/nuls" target="_blank"><i class="footer-icon5"></i></a>
        </div>
        <div>
          <a href="https://www.facebook.com/nulscommunity/" target="_blank"><i class="footer-icon6"></i></a>
        </div>
        <div>
          <a href="https://join.slack.com/t/nuls/shared_invite/enQtMjQ4MTM4ODAyNTI4LWJjNGMwYTE0YjRlYmFlZGUwM2JhOGE4MDIwZmE4MzA2MDg1YzUyMmVkN2RhZjkyNWMzZjY5ZDU5ZmViMjZjNGQ" target="_blank"><i class="footer-icon7"></i></a>
        </div>
        <div>
          <a href="https://gitter.im/nuls_io" target="_blank"><i class="footer-icon8"></i></a>
        </div>
      </div>
   </div>
</div>
  </div>
  <div id="mobile-nav-dimmer"></div>
  <nav id="mobile-nav">
  <div id="mobile-nav-inner">
    <ul id="mobile-nav-list">
      <a href="/docs/" class="mobile-nav-link">Documents</a><a href="/protocol/" class="mobile-nav-link">Protocol</a><a href="/contract/" class="mobile-nav-link">Smart Contract</a><a href="/chain/" class="mobile-nav-link">Cross-Chain</a><a href="/manual/" class="mobile-nav-link">Manual</a><a href="/news/" class="mobile-nav-link">News</a>
      <li class="mobile-nav-item">
        <a href="https://github.com/nuls-io/nuls" class="mobile-nav-link" rel="external" target="_blank">GitHub</a>
      </li>
    </ul>
    
      <strong class="mobile-nav-title">Getting Started</strong><a href="index.html" class="mobile-nav-link">Development Manual</a><a href="NRC-20_Token_Standard.html" class="mobile-nav-link">NRC-20</a><a href="IdeaPlugin.html" class="mobile-nav-link">IDEA Plugin Manual</a><a href="CommunityVote.html" class="mobile-nav-link">Guide to Community Voting</a><a href="smartContract.html" class="mobile-nav-link">Smart Contract Manual</a><a href="SmartContractFee.html" class="mobile-nav-link current">Smart Contract Fee</a>
    
  </div>
  <div id="mobile-lang-select-wrap">
    <span id="mobile-lang-select-label"><i class="fa fa-globe"></i><span>English</span></span>
    <select id="mobile-lang-select" data-canonical="contract/SmartContractFee.html">
      
        <option value="en" selected>English</option>
      
        <option value="zh-cn">简体中文</option>
      
    </select>
  </div>
</nav>
  <!-- Scripts -->
<!-- build:js build/js/main.js -->
<script src="/js/lang_select.js"></script>
<script src="/js/toc.js"></script>
<script src="/js/mobile_nav.js"></script>
<script src="/js/common.js"></script>
<!-- endbuild -->

</body>
</html>